{% extends 'backoffice/larp/marketplace/_base.html.twig' %}

{% set active_tab = 'characters' %}

{% block marketplace_content %}
    {% if characters is not empty %}
        <div class="alert alert-info m-3">
            {{ 'marketplace.min_threads_info'|trans({'%count%': minThreadsPerCharacter}) }}
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th>{{ 'character'|trans }}</th>
                        <th>{{ 'marketplace.current_threads'|trans }}</th>
                        <th>{{ 'tags'|trans }}</th>
                        <th>{{ 'actions'|trans }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for character in characters %}
                        <tr>
                            <td>
                                <a href="{{ path('backoffice_larp_story_character_modify', {
                                    larp: larp.id, character: character.id
                                }) }}">
                                    {{ character.title }}
                                </a>
                            </td>
                            <td>
                                <span class="badge {% if character.threads|length < minThreadsPerCharacter %}bg-danger{% else %}bg-success{% endif %}">
                                    {{ character.threads|length }} / {{ minThreadsPerCharacter }}
                                </span>
                            </td>
                            <td>
                                {% for tag in character.tags %}
                                    <span class="badge bg-secondary">{{ tag.title }}</span>
                                {% endfor %}
                            </td>
                            <td>
                                <a href="{{ path('backoffice_larp_story_marketplace_characters_detail', {
                                    larp: larp.id, character: character.id
                                }) }}" class="btn btn-sm btn-primary">
                                    {{ 'marketplace.view_suggestions'|trans }}
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        {% include 'includes/pagination.html.twig' with { pagination: characters } %}
    {% else %}
        <p class="text-muted p-3">{{ 'empty_list'|trans }}</p>
    {% endif %}
{% endblock %}
