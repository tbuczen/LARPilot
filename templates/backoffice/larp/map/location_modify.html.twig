{% extends 'backoffice/larp/base.html.twig' %}

{% block larp_title %}{{ 'larp.map.location_modify'|trans }} - {{ larp.title }}{% endblock %}

{% block larp_content %}
    <div class="card mt-4">
        <div class="card-header">
            <h2>
                {% if isNew %}
                    {{ 'larp.map.location_create'|trans }}
                {% else %}
                    {{ 'larp.map.location_edit'|trans }} - {{ location.name }}
                {% endif %}
            </h2>
            <p class="mb-0">{{ 'larp.map.on_map'|trans }}: {{ map.name }}</p>
        </div>
        <div class="card-body">
            {% if map.imageFile %}
                <div class="mb-4"
                     data-controller="leaflet-map-editor"
                     data-leaflet-map-editor-image-url-value="{{ map.imagePath }}"
                     data-leaflet-map-editor-grid-rows-value="{{ map.gridRows }}"
                     data-leaflet-map-editor-grid-columns-value="{{ map.gridColumns }}"
                     data-leaflet-map-editor-grid-opacity-value="{{ map.gridOpacity }}"
                     data-leaflet-map-editor-grid-visible-value="{{ map.isGridVisible ? 'true' : 'false' }}"
                     data-leaflet-map-editor-coordinates-target-value="map_location_gridCoordinates">
                    <div id="map-editor" style="height: 500px; width: 100%; border: 1px solid #ddd;" class="mb-3"></div>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i>
                        {{ 'larp.map.location_select_help'|trans }}
                    </div>
                </div>
            {% endif %}

            {{ form_start(form) }}
            {{ form_widget(form) }}
            <div class="d-flex gap-2 mt-3">
                <button type="submit" class="btn btn-primary">
                    {{ 'save'|trans }}
                </button>
                <a href="{{ path('backoffice_larp_map_view', { larp: larp.id, map: map.id }) }}" class="btn btn-secondary">
                    {{ 'cancel'|trans }}
                </a>
            </div>
            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}
