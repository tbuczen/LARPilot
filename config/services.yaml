parameters:
    google_recaptcha_site_key: '%env(GOOGLE_RECAPTCHA_SITE_KEY)%'
    google_api_key: '%env(GOOGLE_API_KEY)%'
    google_app_id: '%env(GOOGLE_APP_ID)%'
    oauth_google_client_id: '%env(OAUTH_GOOGLE_CLIENT_ID)%'
    maps_directory: '%kernel.project_dir%/public/uploads/maps'
    freescout.api_url: '%env(default::FREESCOUT_API_URL)%'
    freescout.api_token: '%env(default::FREESCOUT_API_TOKEN)%'
    freescout.mailbox_id: '%env(int:default::FREESCOUT_MAILBOX_ID)%'
services:
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
        bind:
            $defaultLocale: 'en'
            $googleClientId: '%oauth_google_client_id%'
            $googleClientSecret: '%env(OAUTH_GOOGLE_CLIENT_SECRET)%'
            $googleServiceEmail: '%env(GOOGLE_SERVICE_EMAIL)%'
            $serviceAccountJsonPath: '%env(resolve:GOOGLE_SERVICE_ACCOUNT_JSON)%'
            $freescoutApiUrl: '%freescout.api_url%'
            $freescoutApiToken: '%freescout.api_token%'
            $freescoutMailboxId: '%freescout.mailbox_id%'

    _instanceof:
        App\Domain\Integrations\Service\IntegrationServiceInterface:
            tags: [ 'app.integration' ]
        Symfony\Component\Security\Core\Authorization\Voter\VoterInterface:
          tags: [ 'security.voter' ]

    App\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Domain/*/Entity'
            - '../src/Kernel.php'

    App\Domain\Core\Service\Helper\Logger:
        public: true

    App\Twig\:
        exclude:
            - '../src/Twig/Components/'
        resource: '../src/Twig/'
        tags: [ 'twig.extension' ]

    App\Domain\Integrations\Service\Sharing\DriveSharingServiceProvider:
        arguments:
            $services:
                integration_google_drive: '@App\Domain\Integrations\Service\Sharing\GoogleDriveSharingService'

    App\Domain\Integrations\Service\IntegrationServiceProvider:
        arguments:
            $integrationServices: !tagged_iterator app.integration

    ShipMonk\DoctrineEntityPreloader\EntityPreloader: ~